/**
 * Book-Level Features for Jupyter Book 2 and MyST MD
 * These features apply to the entire book rather than individual chapters.
 */

import { BookLevelFeature, BookLevelFeatureCategory } from '@/types';

export const BOOK_LEVEL_FEATURES: BookLevelFeature[] = [
  // Front Matter Features
  {
    id: 'copyright-page',
    name: 'Copyright Page',
    description: 'Include a copyright page with licensing information, publication date, and legal notices',
    category: 'front-matter',
    enabled: true,
    configKey: 'frontmatter.copyright',
    configValue: { enabled: true },
  },
  {
    id: 'dedication',
    name: 'Dedication',
    description: 'Add a dedication page to honor someone special',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.dedication',
    configValue: { enabled: true, content: '' },
  },
  {
    id: 'epigraph',
    name: 'Epigraph',
    description: 'Include an opening quotation or poem that sets the tone for the book',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.epigraph',
    configValue: { enabled: true, quote: '', attribution: '' },
  },
  {
    id: 'foreword',
    name: 'Foreword',
    description: 'A foreword written by someone other than the author, typically an expert or notable figure',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.foreword',
    configValue: { enabled: true, author: '' },
  },
  {
    id: 'preface',
    name: 'Preface',
    description: "Author's introduction explaining the book's purpose, scope, and how it came to be written",
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.preface',
    configValue: { enabled: true },
  },
  {
    id: 'acknowledgments-front',
    name: 'Acknowledgments',
    description: 'Thank contributors, supporters, and others who helped with the book',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.acknowledgments',
    configValue: { enabled: true },
  },
  {
    id: 'how-to-use',
    name: 'How to Use This Book',
    description: 'Guide readers on how to navigate and get the most out of the book',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.how_to_use',
    configValue: { enabled: true },
  },
  {
    id: 'prerequisites',
    name: 'Prerequisites',
    description: 'List required knowledge, software, or tools readers need before starting',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.prerequisites',
    configValue: { enabled: true },
  },
  {
    id: 'conventions',
    name: 'Conventions Used',
    description: 'Explain typographical conventions, code formatting, and symbols used throughout the book',
    category: 'front-matter',
    enabled: false,
    configKey: 'frontmatter.conventions',
    configValue: { enabled: true },
  },

  // Back Matter Features
  {
    id: 'about-authors',
    name: 'About the Author(s)',
    description: 'Biographical information about the author(s) including credentials and background',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.about_authors',
    configValue: { enabled: true },
  },
  {
    id: 'note-from-authors',
    name: 'Note from the Author(s)',
    description: 'A personal message from the author(s) to readers',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.author_note',
    configValue: { enabled: true },
  },
  {
    id: 'appendices',
    name: 'Appendices',
    description: 'Supplementary material like reference tables, additional examples, or extended explanations',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.appendices',
    configValue: { enabled: true, count: 1 },
  },
  {
    id: 'glossary',
    name: 'Glossary',
    description: 'Definitions of key terms and concepts used throughout the book',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.glossary',
    configValue: { enabled: true },
  },
  {
    id: 'bibliography',
    name: 'Bibliography',
    description: 'Complete list of sources and references cited in the book',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.bibliography',
    configValue: { enabled: true },
  },
  {
    id: 'further-reading',
    name: 'Further Reading',
    description: 'Recommended resources for readers who want to learn more',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.further_reading',
    configValue: { enabled: true },
  },
  {
    id: 'index-book',
    name: 'Index',
    description: 'Alphabetical index of topics, terms, and concepts with page references',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.index',
    configValue: { enabled: true },
  },
  {
    id: 'colophon',
    name: 'Colophon',
    description: 'Technical details about the book production - fonts, tools, and technologies used',
    category: 'back-matter',
    enabled: false,
    configKey: 'backmatter.colophon',
    configValue: { enabled: true },
  },

  // Export Features
  {
    id: 'pdf-download',
    name: 'PDF Download',
    description: 'Allow readers to download the entire book as a single PDF file',
    category: 'export',
    enabled: false,
    configKey: 'export.pdf',
    configValue: { enabled: true, format: 'pdf' },
  },
  {
    id: 'latex-export',
    name: 'LaTeX Export',
    description: 'Enable LaTeX source export for academic publishing',
    category: 'export',
    enabled: false,
    configKey: 'export.latex',
    configValue: { enabled: true },
  },
  {
    id: 'docx-export',
    name: 'Word Document Export',
    description: 'Allow download as Microsoft Word document',
    category: 'export',
    enabled: false,
    configKey: 'export.docx',
    configValue: { enabled: true },
  },
  {
    id: 'epub-export',
    name: 'EPUB Export',
    description: 'Enable e-book format export for e-readers',
    category: 'export',
    enabled: false,
    configKey: 'export.epub',
    configValue: { enabled: true },
  },
  {
    id: 'chapter-pdf',
    name: 'Per-Chapter PDF',
    description: 'Allow downloading individual chapters as separate PDFs',
    category: 'export',
    enabled: false,
    configKey: 'export.chapter_pdf',
    configValue: { enabled: true },
  },
  {
    id: 'print-friendly',
    name: 'Print-Friendly Pages',
    description: 'Optimized print stylesheets for paper printing',
    category: 'export',
    enabled: true,
    configKey: 'site.print',
    configValue: { enabled: true },
  },

  // Navigation Features
  {
    id: 'toc-sidebar',
    name: 'Table of Contents Sidebar',
    description: 'Persistent sidebar showing full book navigation',
    category: 'navigation',
    enabled: true,
    configKey: 'site.options.toc_sidebar',
    configValue: true,
  },
  {
    id: 'breadcrumbs',
    name: 'Breadcrumb Navigation',
    description: 'Show hierarchical path to current page',
    category: 'navigation',
    enabled: true,
    configKey: 'site.options.breadcrumbs',
    configValue: true,
  },
  {
    id: 'prev-next',
    name: 'Previous/Next Navigation',
    description: 'Navigation links between consecutive chapters',
    category: 'navigation',
    enabled: true,
    configKey: 'site.options.prev_next',
    configValue: true,
  },
  {
    id: 'page-toc',
    name: 'In-Page Table of Contents',
    description: 'Right sidebar showing current page sections',
    category: 'navigation',
    enabled: true,
    configKey: 'site.options.page_toc',
    configValue: true,
  },
  {
    id: 'reading-time',
    name: 'Reading Time Estimate',
    description: 'Show estimated reading time for each chapter',
    category: 'navigation',
    enabled: false,
    configKey: 'site.options.reading_time',
    configValue: true,
  },
  {
    id: 'progress-bar',
    name: 'Reading Progress Bar',
    description: 'Visual indicator of reading progress through the book',
    category: 'navigation',
    enabled: false,
    configKey: 'site.options.progress',
    configValue: true,
  },

  // Interactivity Features
  {
    id: 'comments',
    name: 'Reader Comments',
    description: 'Enable comments and discussions on pages (via Giscus/Utterances)',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.comments',
    configValue: { provider: 'giscus' },
  },
  {
    id: 'annotations',
    name: 'Hypothesis Annotations',
    description: 'Allow readers to annotate and highlight text with Hypothesis',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.hypothesis',
    configValue: true,
  },
  {
    id: 'copy-button',
    name: 'Copy Button for Code',
    description: 'One-click copy for code blocks',
    category: 'interactivity',
    enabled: true,
    configKey: 'site.options.copy_button',
    configValue: true,
  },
  {
    id: 'github-buttons',
    name: 'GitHub Integration Buttons',
    description: 'Show buttons to view source, open issues, or edit on GitHub',
    category: 'interactivity',
    enabled: true,
    configKey: 'site.options.github_buttons',
    configValue: { source: true, issue: true, edit: true },
  },
  {
    id: 'launch-buttons',
    name: 'Launch Buttons',
    description: 'Buttons to open notebooks in Binder, JupyterHub, or Colab',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.launch_buttons',
    configValue: { binder: true, colab: true, jupyterhub: false },
  },
  {
    id: 'thebe-live-code',
    name: 'Thebe Live Code',
    description: 'Run code blocks live in the browser using Thebe with a kernel backend',
    category: 'interactivity',
    enabled: false,
    configKey: 'jupyter.thebe',
    configValue: { enabled: true },
  },
  {
    id: 'jupyterlite',
    name: 'JupyterLite (In-Browser Python)',
    description: 'Full Jupyter environment running entirely in the browser - no server needed',
    category: 'interactivity',
    enabled: false,
    configKey: 'jupyter.lite',
    configValue: { enabled: true, kernel: 'python' },
  },
  {
    id: 'pyodide',
    name: 'Pyodide (Python WASM)',
    description: 'Run Python code in WebAssembly - fast, serverless execution in the browser',
    category: 'interactivity',
    enabled: false,
    configKey: 'jupyter.pyodide',
    configValue: { enabled: true },
  },
  {
    id: 'colab-integration',
    name: 'Google Colab Integration',
    description: 'Open code cells directly in Google Colab for GPU/TPU access',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.colab',
    configValue: { enabled: true },
  },
  {
    id: 'binder-integration',
    name: 'Binder Integration',
    description: 'Launch interactive notebooks in MyBinder.org cloud environment',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.binder',
    configValue: { enabled: true, repo: '', branch: 'main' },
  },
  {
    id: 'code-output-cache',
    name: 'Code Output Caching',
    description: 'Pre-compute and cache code outputs for faster page loads',
    category: 'interactivity',
    enabled: false,
    configKey: 'jupyter.cache',
    configValue: { enabled: true },
  },
  {
    id: 'interactive-widgets',
    name: 'Interactive Widgets (ipywidgets)',
    description: 'Support for Jupyter widgets like sliders, dropdowns, and interactive plots',
    category: 'interactivity',
    enabled: false,
    configKey: 'jupyter.widgets',
    configValue: { enabled: true },
  },
  {
    id: 'plotly-interactive',
    name: 'Interactive Plotly Charts',
    description: 'Enable interactive Plotly visualizations that readers can zoom, pan, and explore',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.plotly',
    configValue: { enabled: true },
  },
  {
    id: 'bokeh-interactive',
    name: 'Bokeh Interactive Visualizations',
    description: 'Support for Bokeh interactive data visualizations',
    category: 'interactivity',
    enabled: false,
    configKey: 'site.options.bokeh',
    configValue: { enabled: true },
  },

  // Analytics Features
  {
    id: 'google-analytics',
    name: 'Google Analytics',
    description: 'Track page views and reader behavior with Google Analytics',
    category: 'analytics',
    enabled: false,
    configKey: 'site.options.analytics.google',
    configValue: { id: '' },
  },
  {
    id: 'plausible',
    name: 'Plausible Analytics',
    description: 'Privacy-friendly analytics with Plausible',
    category: 'analytics',
    enabled: false,
    configKey: 'site.options.analytics.plausible',
    configValue: { domain: '' },
  },

  // Search Features
  {
    id: 'full-text-search',
    name: 'Full-Text Search',
    description: 'Search across all book content',
    category: 'search',
    enabled: true,
    configKey: 'site.options.search',
    configValue: { enabled: true },
  },
  {
    id: 'algolia-search',
    name: 'Algolia Search',
    description: 'Enhanced search powered by Algolia DocSearch',
    category: 'search',
    enabled: false,
    configKey: 'site.options.search.algolia',
    configValue: { apiKey: '', indexName: '' },
  },

  // Accessibility Features
  {
    id: 'dark-mode',
    name: 'Dark Mode Toggle',
    description: 'Allow readers to switch between light and dark themes',
    category: 'accessibility',
    enabled: true,
    configKey: 'site.options.dark_mode',
    configValue: true,
  },
  {
    id: 'font-size-control',
    name: 'Font Size Control',
    description: 'Allow readers to adjust text size',
    category: 'accessibility',
    enabled: false,
    configKey: 'site.options.font_size',
    configValue: true,
  },
  {
    id: 'dyslexia-font',
    name: 'Dyslexia-Friendly Font',
    description: 'Option to use OpenDyslexic font for better readability',
    category: 'accessibility',
    enabled: false,
    configKey: 'site.options.dyslexia_font',
    configValue: true,
  },
  {
    id: 'high-contrast',
    name: 'High Contrast Mode',
    description: 'Enhanced contrast option for visual accessibility',
    category: 'accessibility',
    enabled: false,
    configKey: 'site.options.high_contrast',
    configValue: true,
  },

  // Versioning Features
  {
    id: 'version-dropdown',
    name: 'Version Dropdown',
    description: 'Allow readers to switch between different versions of the book',
    category: 'versioning',
    enabled: false,
    configKey: 'site.options.versions',
    configValue: { enabled: true },
  },
  {
    id: 'last-updated',
    name: 'Last Updated Date',
    description: 'Show when each page was last modified',
    category: 'versioning',
    enabled: false,
    configKey: 'site.options.last_updated',
    configValue: true,
  },
  {
    id: 'git-history',
    name: 'Git History Link',
    description: 'Link to view page history on GitHub',
    category: 'versioning',
    enabled: false,
    configKey: 'site.options.git_history',
    configValue: true,
  },
];

// Helper to get features by category
export function getBookFeaturesByCategory(category: BookLevelFeatureCategory): BookLevelFeature[] {
  return BOOK_LEVEL_FEATURES.filter(f => f.category === category);
}

// Category metadata
export const BOOK_FEATURE_CATEGORIES: Record<BookLevelFeatureCategory, { name: string; description: string; icon: string }> = {
  'front-matter': {
    name: 'Front Matter',
    description: 'Opening sections that appear before the main content',
    icon: 'book-open',
  },
  'back-matter': {
    name: 'Back Matter',
    description: 'Supplementary sections that appear after the main content',
    icon: 'book-marked',
  },
  export: {
    name: 'Export & Download',
    description: 'Options for exporting and downloading your book',
    icon: 'download',
  },
  navigation: {
    name: 'Navigation & Structure',
    description: 'How readers navigate through your book',
    icon: 'navigation',
  },
  interactivity: {
    name: 'Interactivity & Engagement',
    description: 'Interactive features for reader engagement',
    icon: 'zap',
  },
  analytics: {
    name: 'Analytics & Tracking',
    description: 'Track how readers use your book',
    icon: 'chart',
  },
  search: {
    name: 'Search',
    description: 'Search capabilities for your book',
    icon: 'search',
  },
  accessibility: {
    name: 'Accessibility',
    description: 'Make your book accessible to all readers',
    icon: 'eye',
  },
  versioning: {
    name: 'Versioning & History',
    description: 'Track changes and maintain different versions',
    icon: 'git',
  },
};
